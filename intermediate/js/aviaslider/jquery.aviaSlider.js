document.documentElement.className+="js_active";
(function(d){d.fn.aviaSlider=function(f){var a=d.extend({slides:"li",animationSpeed:900,autorotation:!0,autorotationSpeed:3,appendControlls:"",slideControlls:"items",blockSize:{height:"full",width:"full"},betweenBlockDelay:60,display:"topleft",switchMovement:!1,showText:!0,transition:"fade",backgroundOpacity:0.8,transitionOrder:["diagonaltop","diagonalbottom","topleft","bottomright","random"]},f);return this.each(function(){var b=d(this),c=b.find(a.slides),q=c.find("img"),l=c.length,t=c.width(),u=
c.height(),p=0,g=0,f=!1,r=0,w="active_item",j="",n=!0,v="",m="",k="",h=[];if(a.blockSize.height=="full")a.blockSize.height=u;if(a.blockSize.width=="full")a.blockSize.width=t;b.methods={init:function(){var e=0,o=0,s=!0,i="";for(c.filter(":first").css({"z-index":"5",display:"block"});s;)p++,i="-"+e+"px -"+o+"px",d('<div class="kBlock"></div>').appendTo(b).css({zIndex:20,position:"absolute",display:"none",left:e,top:o,height:a.blockSize.height,width:a.blockSize.width,backgroundPosition:i}),e+=a.blockSize.width,
e>=t&&(e=0,o+=a.blockSize.height),o>=u&&(s=!1);m=b.find(".kBlock");h.topleft=m;h.bottomright=d(m.get().reverse());h.diagonaltop=b.methods.kcubit(m);h.diagonalbottom=b.methods.kcubit(h.bottomright);h.random=b.methods.fyrandomize(m);c.each(function(){d.data(this,"data",{img:d(this).find("img").attr("src")})});l<=1?b.aviaSlider_preloadhelper({delay:200}):(b.aviaSlider_preloadhelper({callback:b.methods.preloadingDone}),b.methods.appendControlls().addDescription())},appendControlls:function(){if(a.slideControlls==
"items"){var e=a.appendControlls||b[0];j=d("<div></div>").addClass("slidecontrolls").insertAfter(e);c.each(function(a){d('<a href="#" class="ie6fix '+w+'"></a>').appendTo(j).bind("click",{currentSlideNumber:a},b.methods.switchSlide);w=""});j.width(j.width()).css("float","none")}return this},addDescription:function(){a.showText&&c.each(function(){var e=d(this),b=e.find("img").attr("alt"),c=b.split("::");c[0]!=""&&(b=c[1]!=void 0?"<strong>"+c[0]+"</strong>"+c[1]:c[0]);b!=""&&d("<div></div>").addClass("feature_excerpt").html(b).css({display:"block",
opacity:a.backgroundOpacity}).appendTo(e.find("a"))})},preloadingDone:function(){n=!1;c.css({backgroundColor:"transparent",backgroundImage:"none"});a.autorotation&&(b.methods.autorotate(),q.bind("click",function(){clearInterval(v)}))},autorotate:function(){v=setInterval(function(){g++;g==l&&(g=0);b.methods.switchSlide()},parseInt(a.autorotationSpeed)*1E3+a.betweenBlockDelay*p+a.animationSpeed)},switchSlide:function(e){var o=!1;if(e!=void 0&&!n)g!=e.data.currentSlideNumber?g=e.data.currentSlideNumber:
o=!0;e!=void 0&&clearInterval(v);if(!n&&o==!1){n=!0;var s=c.filter(":visible"),i=c.filter(":eq("+g+")"),e="url("+d.data(i[0],"data").img+")";a.slideControlls&&(j.find(".active_item").removeClass("active_item"),j.find("a:eq("+g+")").addClass("active_item"));k=h[a.display];c.find(">a>img").css({opacity:1,visibility:"visible"});if(a.switchMovement&&(a.display=="topleft"||a.display=="diagonaltop"))f==!1?(k=h[a.display],f=!0):(a.display=="topleft"&&(k=h.bottomright),a.display=="diagonaltop"&&(k=h.diagonalbottom),
f=!1);a.display=="random"&&(k=b.methods.fyrandomize(m));a.display=="all"&&(k=h[a.transitionOrder[r]],r++,r>=a.transitionOrder.length&&(r=0));k.css({backgroundImage:e}).each(function(e){var c=d(this);setTimeout(function(){var d=[];a.transition=="drop"?(d.css={height:1,width:a.blockSize.width,display:"block",opacity:0},d.anim={height:a.blockSize.height,width:a.blockSize.width,opacity:1}):a.transition=="fade"?(d.css={display:"block",opacity:0},d.anim={opacity:1}):(d.css={height:1,width:1,display:"block",
opacity:0},d.anim={height:a.blockSize.height,width:a.blockSize.width,opacity:1});c.css(d.css).animate(d.anim,a.animationSpeed,function(){e+1==p&&b.methods.changeImage(s,i)})},e*a.betweenBlockDelay)})}return!1},changeImage:function(e,d){e.css({zIndex:0,display:"none"});d.css({zIndex:3,display:"block"});k.fadeOut(a.animationSpeed*1/3,function(){n=!1})},fyrandomize:function(a){var b=a.length,a=d(a);if(b==0)return!1;for(;--b;){var c=Math.floor(Math.random()*(b+1)),i=a[b];a[b]=a[c];a[c]=i}return a},kcubit:function(b){var c=
b.length,h=d(b),i=0,l=Math.ceil(u/a.blockSize.height),k=Math.ceil(t/a.blockSize.width),k=p/k,l=p/l,f=0,g=0,j=0,m=0,n=!1,q=!1;if(c==0)return!1;for(j=0;j<c;j++)if(h[j]=b[i],i%l==0&&p-j>l||(g+1)%k==0?(i-=(l-1)*g-1,g=0,f++,q=!1,m>0&&(g=m,i+=(l-1)*g)):(i+=l-1,g++),f%(l-1)==0&&f!=0&&m==0||n==!0&&q==!1)f=0.1,m++,q=n=!0;return h}};b.methods.init()})}})(jQuery);
(function(d){d.fn.aviaSlider_preloadhelper=function(f){var a=d.extend({fadeInSpeed:800,delay:0,callback:""},f);return this.each(function(){var b=jQuery(this),c=b.find("img").css({opacity:0,visibility:"hidden",display:"block"}),f=c.length;b.operations={preload:function(){c.each(function(a,c){var f=d(this);c.complete==!0?b.operations.showImage(f):f.bind("error load",{currentImage:f},b.operations.showImage)});return this},showImage:function(b){f--;if(b.data.currentImage!=void 0)b=b.data.currentImage;
a.delay<=0&&b.css("visibility","visible").animate({opacity:1},a.fadeInSpeed);f==0&&(a.delay>0?(c.each(function(b){var c=d(this);setTimeout(function(){c.css("visibility","visible").animate({opacity:1},a.fadeInSpeed,function(){d(this).parent().removeClass("preloading")})},a.delay*(b+1))}),a.callback!=""&&setTimeout(a.callback,a.delay*c.length)):a.callback!=""&&a.callback())}};b.operations.preload()})}})(jQuery);
