document.documentElement.className+="js_active";(function(a){a.fn.aviaSlider=function(d){var c={slides:"li",animationSpeed:900,autorotation:true,autorotationSpeed:3,appendControlls:"",slideControlls:"items",blockSize:{height:"full",width:"full"},betweenBlockDelay:60,display:"topleft",switchMovement:false,showText:true,transition:"fade",backgroundOpacity:0.8,transitionOrder:["diagonaltop","diagonalbottom","topleft","bottomright","random"]};var b=a.extend(c,d);return this.each(function(){var p=a(this),e=p.find(b.slides),j=e.find("img"),q=e.length,i=e.width(),o=e.height(),m=0,k=0,t=false,u=0,s="active_item",f="",l=true,h="",r="",g="",n=[];if(b.blockSize.height=="full"){b.blockSize.height=o}if(b.blockSize.width=="full"){b.blockSize.width=i}p.methods={init:function(){var y=0,x=0,v=true,w="";e.filter(":first").css({"z-index":"5",display:"block"});while(v){m++;w="-"+y+"px -"+x+"px";a('<div class="kBlock"></div>').appendTo(p).css({zIndex:20,position:"absolute",display:"none",left:y,top:x,height:b.blockSize.height,width:b.blockSize.width,backgroundPosition:w});y+=b.blockSize.width;if(y>=i){y=0;x+=b.blockSize.height}if(x>=o){v=false}}r=p.find(".kBlock");n.topleft=r;n.bottomright=a(r.get().reverse());n.diagonaltop=p.methods.kcubit(r);n.diagonalbottom=p.methods.kcubit(n.bottomright);n.random=p.methods.fyrandomize(r);e.each(function(){a.data(this,"data",{img:a(this).find("img").attr("src")})});if(q<=1){p.aviaSlider_preloadhelper({delay:200})}else{p.aviaSlider_preloadhelper({callback:p.methods.preloadingDone});p.methods.appendControlls().addDescription()}},appendControlls:function(){if(b.slideControlls=="items"){var v=b.appendControlls||p[0];f=a("<div></div>").addClass("slidecontrolls").insertAfter(v);e.each(function(x){var w=a('<a href="#" class="ie6fix '+s+'"></a>').appendTo(f);w.bind("click",{currentSlideNumber:x},p.methods.switchSlide);s=""});f.width(f.width()).css("float","none")}return this},addDescription:function(){if(b.showText){e.each(function(){var x=a(this),w=x.find("img").attr("alt"),v=w.split("::");if(v[0]!=""){if(v[1]!=undefined){w="<strong>"+v[0]+"</strong>"+v[1]}else{w=v[0]}}if(w!=""){a("<div></div>").addClass("feature_excerpt").html(w).css({display:"block",opacity:b.backgroundOpacity}).appendTo(x.find("a"))}})}},preloadingDone:function(){l=false;e.css({backgroundColor:"transparent",backgroundImage:"none"});if(b.autorotation){p.methods.autorotate();j.bind("click",function(){clearInterval(h)})}},autorotate:function(){h=setInterval(function(){k++;if(k==q){k=0}p.methods.switchSlide()},(parseInt(b.autorotationSpeed)*1000)+(b.betweenBlockDelay*m)+b.animationSpeed)},switchSlide:function(A){var w=false;if(A!=undefined&&!l){if(k!=A.data.currentSlideNumber){k=A.data.currentSlideNumber}else{w=true}}if(A!=undefined){clearInterval(h)}if(!l&&w==false){l=true;var y=e.filter(":visible"),x=e.filter(":eq("+k+")"),v=a.data(x[0],"data").img,z="url("+v+")";if(b.slideControlls){f.find(".active_item").removeClass("active_item");f.find("a:eq("+k+")").addClass("active_item")}g=n[b.display];e.find(">a>img").css({opacity:1,visibility:"visible"});if(b.switchMovement&&(b.display=="topleft"||b.display=="diagonaltop")){if(t==false){g=n[b.display];t=true}else{if(b.display=="topleft"){g=n.bottomright}if(b.display=="diagonaltop"){g=n.diagonalbottom}t=false}}if(b.display=="random"){g=p.methods.fyrandomize(r)}if(b.display=="all"){g=n[b.transitionOrder[u]];u++;if(u>=b.transitionOrder.length){u=0}}g.css({backgroundImage:z}).each(function(B){var C=a(this);setTimeout(function(){var D=new Array();if(b.transition=="drop"){D.css={height:1,width:b.blockSize.width,display:"block",opacity:0};D.anim={height:b.blockSize.height,width:b.blockSize.width,opacity:1}}else{if(b.transition=="fade"){D.css={display:"block",opacity:0};D.anim={opacity:1}}else{D.css={height:1,width:1,display:"block",opacity:0};D.anim={height:b.blockSize.height,width:b.blockSize.width,opacity:1}}}C.css(D.css).animate(D.anim,b.animationSpeed,function(){if(B+1==m){p.methods.changeImage(y,x)}})},B*b.betweenBlockDelay)
})}return false},changeImage:function(w,v){w.css({zIndex:0,display:"none"});v.css({zIndex:3,display:"block"});g.fadeOut(b.animationSpeed*1/3,function(){l=false})},fyrandomize:function(w){var y=w.length,v=a(w);if(y==0){return false}while(--y){var x=Math.floor(Math.random()*(y+1)),A=v[y],z=v[x];v[y]=z;v[x]=A}return v},kcubit:function(A){var x=A.length,H=a(A),F=0,I=Math.ceil(o/b.blockSize.height),z=Math.ceil(i/b.blockSize.width),C=m/z,y=m/I,w=0,v=0,B=0,E=0,G=false,D=false;if(x==0){return false}for(B=0;B<x;B++){H[B]=A[F];if((F%y==0&&m-B>y)||(v+1)%C==0){F-=(((y-1)*v)-1);v=0;w++;D=false;if(E>0){v=E;F+=(y-1)*v}}else{F+=y-1;v++}if((w%(y-1)==0&&w!=0&&E==0)||(G==true&&D==false)){w=0.1;E++;G=true;D=true}}return H}};p.methods.init()})}})(jQuery);(function(a){a.fn.aviaSlider_preloadhelper=function(d){var c={fadeInSpeed:800,delay:0,callback:""};var b=a.extend(c,d);return this.each(function(){var f=jQuery(this),e=f.find("img").css({opacity:0,visibility:"hidden",display:"block"}),g=e.length;f.operations={preload:function(){var h=true;e.each(function(j,k){var l=a(this);if(k.complete==true){f.operations.showImage(l)}else{l.bind("error load",{currentImage:l},f.operations.showImage)}});return this},showImage:function(h){g--;if(h.data.currentImage!=undefined){h=h.data.currentImage}if(b.delay<=0){h.css("visibility","visible").animate({opacity:1},b.fadeInSpeed)}if(g==0){if(b.delay>0){e.each(function(j,k){var l=a(this);setTimeout(function(){l.css("visibility","visible").animate({opacity:1},b.fadeInSpeed,function(){a(this).parent().removeClass("preloading")})},b.delay*(j+1))});if(b.callback!=""){setTimeout(b.callback,b.delay*e.length)}}else{if(b.callback!=""){(b.callback)()}}}}};f.operations.preload()})}})(jQuery);